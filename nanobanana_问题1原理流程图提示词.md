# NanoBanana 问题1原理流程图提示词

## 2026年MCM C题：与星共舞（Dancing with the Stars）
## 问题1：粉丝投票估算模型——约束优化与贝叶斯推断双方案融合

---

## 一、主提示词（中文版）

### O奖级别问题1原理流程图提示词

```
请为我生成一张O奖级别的精美科研风格原理流程图，详细展示数学建模竞赛问题1"粉丝投票估算模型"的核心原理与求解逻辑。

【研究问题】
问题1：如何从公开的评委评分数据和淘汰结果中，逆向推导严格保密的粉丝投票份额？

【核心方法】
采用"约束优化 + 贝叶斯推断"双方案融合框架

---

【流程图整体架构】

采用自上而下的层次化设计，分为5个核心层次：

┌─────────────────────────────────────────────────────────────────────────┐
│                         问题1：粉丝投票估算模型                           │
│                    Fan Vote Estimation Model                            │
│                   ─── 隐变量逆向推导问题 ───                              │
└─────────────────────────────────────────────────────────────────────────┘

---

【第一层：问题定义与数据输入】

标题：Problem Definition & Data Input / 问题定义与数据输入

┌─────────────────────────────────────────────────────────────────────────┐
│                           核心矛盾识别                                   │
│  ┌─────────────────┐         ┌─────────────────┐                       │
│  │    已知信息      │   vs   │    未知信息      │                       │
│  │ ─────────────── │         │ ─────────────── │                       │
│  │ ✓ 评委评分 S_i,t │         │ ✗ 粉丝投票 V_i,t │                       │
│  │ ✓ 淘汰结果 e_t   │         │   （严格保密）   │                       │
│  │ ✓ 合并规则 Rule  │         │                 │                       │
│  └─────────────────┘         └─────────────────┘                       │
│                                                                         │
│  【核心思想】利用"被淘汰者合并得分最低"的约束条件，逆向推导粉丝投票       │
└─────────────────────────────────────────────────────────────────────────┘

输入数据框：
├── 评委评分矩阵：S_{i,t}（第i位选手第t周的评委总分）
├── 淘汰结果序列：e_t（第t周被淘汰选手的索引）
├── 赛季规则标记：排名法(S1-2) / 百分比法(S3-27) / 排名法+评委决定(S28-34)
└── 数据规模：421条选手×11周×3-4位评委

---

【第二层：合并规则建模】

标题：Score Aggregation Rules / 合并得分计算规则

┌─────────────────────────────────────────────────────────────────────────┐
│                        三种赛季规则的数学表达                             │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ ① 排名法 (Ranking Method) - 第1-2季                             │   │
│  │                                                                 │   │
│  │    C_{i,t} = Rank_J(S_{i,t}) + Rank_F(V_{i,t})                   │   │
│  │                                                                 │   │
│  │    ·评委评分排名 + 粉丝投票排名 = 合并得分                        │   │
│  │    ·排名越小越好，最低者被淘汰                                   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ ② 百分比法 (Percentage Method) - 第3-27季                       │   │
│  │                                                                 │   │
│  │    C_{i,t} = 0.5 × P_J(S_{i,t}) + 0.5 × P_F(V_{i,t})             │   │
│  │                                                                 │   │
│  │    其中：P_J = S_{i,t} / Σ S_{j,t} × 100%                        │   │
│  │         P_F = V_{i,t} × 100%                                    │   │
│  │                                                                 │   │
│  │    ·评委百分比和粉丝百分比各占50%权重                            │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ ③ 排名法+评委决定 (Ranking + Judge Save) - 第28-34季             │   │
│  │                                                                 │   │
│  │    ·合并得分同①排名法                                           │   │
│  │    ·当底部两名选手合并得分接近时                                  │   │
│  │    ·由评委投票决定最终淘汰人选                                   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘

---

【第三层：双方案建模框架】★核心重点★

标题：Dual-Scheme Modeling Framework / 双方案融合建模框架

设计要求：此层为流程图的视觉焦点，使用更大尺寸、更丰富细节、醒目配色

┌─────────────────────────────────────────────────────────────────────────┐
│                    ★ 双方案融合框架 Dual-Scheme Fusion ★                 │
│                                                                         │
│  ┌────────────────────────────┐     ┌────────────────────────────┐     │
│  │      方案1：约束优化         │     │      方案2：贝叶斯推断       │     │
│  │  Constrained Optimization   │     │    Bayesian Inference      │     │
│  │                            │     │                            │     │
│  │  【目标】提供点估计          │     │  【目标】量化不确定性        │     │
│  │  【优势】精度高，可解释性强  │     │  【优势】提供置信区间        │     │
│  └──────────────┬─────────────┘     └──────────────┬─────────────┘     │
│                 │                                   │                   │
│                 ▼                                   ▼                   │
│  ┌────────────────────────────┐     ┌────────────────────────────┐     │
│  │      【优化目标函数】        │     │      【先验分布建模】        │     │
│  │                            │     │                            │     │
│  │  min L(V) =                │     │  V_t ~ Dirichlet(α_t)      │     │
│  │    λ_reg·||V-V_prior||²    │     │                            │     │
│  │  + λ_smooth·||V-V_{t-1}||² │     │  浓度参数：                 │     │
│  │                            │     │  α_{i,t} = α_0·(1 +        │     │
│  │  λ_reg = 0.10              │     │    (S_{i,t}-S̄_t)/σ_S)      │     │
│  │  λ_smooth = 0.05           │     │                            │     │
│  │                            │     │  基础浓度 α_0 = 5           │     │
│  └──────────────┬─────────────┘     └──────────────┬─────────────┘     │
│                 │                                   │                   │
│                 ▼                                   ▼                   │
│  ┌────────────────────────────┐     ┌────────────────────────────┐     │
│  │      【核心约束条件】        │     │      【后验采样】           │     │
│  │                            │     │                            │     │
│  │  s.t.                      │     │  Bootstrap采样：B=1000次   │     │
│  │  ① C_{e_t,t} ≤ C_{i,t}     │     │                            │     │
│  │     (被淘汰者得分最低)       │     │  置信区间计算：             │     │
│  │                            │     │  CI_95% = [V^{2.5%},       │     │
│  │  ② Σ V_{i,t} = 1           │     │            V^{97.5%}]      │     │
│  │     (投票份额归一化)         │     │                            │     │
│  │                            │     │                            │     │
│  │  ③ 0 ≤ V_{i,t} ≤ 1         │     │                            │     │
│  │     (非负且有界)            │     │                            │     │
│  └──────────────┬─────────────┘     └──────────────┬─────────────┘     │
│                 │                                   │                   │
│                 ▼                                   ▼                   │
│  ┌────────────────────────────┐     ┌────────────────────────────┐     │
│  │      【输出】               │     │      【输出】               │     │
│  │                            │     │                            │     │
│  │  V̂_{i,t}^{opt}             │     │  V̂_{i,t}^{bayes}          │     │
│  │  粉丝投票点估计值            │     │  粉丝投票后验分布           │     │
│  │                            │     │  95%置信区间                │     │
│  └──────────────┬─────────────┘     └──────────────┬─────────────┘     │
│                 │                                   │                   │
│                 └─────────────┬─────────────────────┘                   │
│                               ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                    【双方案加权融合】                             │   │
│  │                                                                 │   │
│  │     V̂_{i,t}^{final} = w_opt · V̂_{i,t}^{opt}                     │   │
│  │                     + w_bayes · V̂_{i,t}^{bayes}                  │   │
│  │                                                                 │   │
│  │     权重设置：w_opt = 0.70, w_bayes = 0.30                       │   │
│  │     设计理由：优先保证约束优化的点估计精度，同时保留不确定性量化    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘

---

【第四层：核心统计机理解析】

标题：Statistical Mechanism / 核心统计机理

┌─────────────────────────────────────────────────────────────────────────┐
│                    约束条件的数学推导与物理意义                           │
│                                                                         │
│  【淘汰规则的数学形式化】                                                │
│                                                                         │
│    被淘汰者 e_t = argmin_i C_{i,t}                                      │
│                                                                         │
│    即：对任意幸存者 j ≠ e_t，有 C_{e_t,t} ≤ C_{j,t}                      │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│                                                                         │
│  【以百分比法为例展开推导】                                              │
│                                                                         │
│    0.5 × S_{e_t}/ΣS + 0.5 × V_{e_t} ≤ 0.5 × S_j/ΣS + 0.5 × V_j         │
│                                                                         │
│    整理得投票份额约束：                                                  │
│                                                                         │
│    V_j - V_{e_t} ≥ (S_{e_t} - S_j) / ΣS_k                               │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│                                                                         │
│  【统计机理的物理解释】                                                  │
│                                                                         │
│    ┌────────────────────────────────────────────────────────────────┐  │
│    │                                                                │  │
│    │   若被淘汰者的评委评分 > 某幸存者的评委评分                      │  │
│    │                     ↓                                          │  │
│    │   则该幸存者必须获得更多的粉丝投票来弥补评分差距                  │  │
│    │                     ↓                                          │  │
│    │   这解释了"低评分选手需高粉丝支持才能幸存"的现象                  │  │
│    │                                                                │  │
│    │   例：Bobby Bones (S27) 评分一直很低却获得冠军                  │  │
│    │       → 必然拥有极高的粉丝投票支持                              │  │
│    │                                                                │  │
│    └────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘

---

【第五层：求解结果与验证】

标题：Results & Validation / 求解结果与模型验证

┌─────────────────────────────────────────────────────────────────────────┐
│                           核心求解结果                                   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                      一致性评估（子问题1.1）                      │   │
│  │                                                                 │   │
│  │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │   │
│  │   │ 淘汰预测准确率   │  │ Cohen's Kappa   │  │   相对提升      │ │   │
│  │   │                 │  │                 │  │                 │ │   │
│  │   │   ✓ 100.00%     │  │   ✓ 1.0000     │  │   ✓ 751.9%     │ │   │
│  │   │   (完美预测)     │  │  (完全一致)      │  │  (vs随机基准)   │ │   │
│  │   └─────────────────┘  └─────────────────┘  └─────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                      确定性度量（子问题1.2）                      │   │
│  │                                                                 │   │
│  │   ┌─────────────────┐  ┌─────────────────┐                     │   │
│  │   │  平均标准差      │  │ 95%置信区间宽度  │                     │   │
│  │   │                 │  │                 │                     │   │
│  │   │   0.0768        │  │   0.2882        │                     │   │
│  │   │                 │  │  (±14.4%)       │                     │   │
│  │   └─────────────────┘  └─────────────────┘                     │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                   分层确定性分析（子问题1.3）                     │   │
│  │                                                                 │   │
│  │   按周次变化：Week1(σ=0.054) → Week11(σ=0.145)                  │   │
│  │              早期确定性高，后期不确定性增加                       │   │
│  │                                                                 │   │
│  │   按规则变化：JudgeSave(σ=0.069) < Percentage(σ=0.078)         │   │
│  │              < Ranking(σ=0.108)                                 │   │
│  │              评委决定机制下确定性最高                            │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘

---

【视觉设计要求 - O奖级别标准】

1. **整体配色**：
   - 主色调：深蓝色(#1E3A8A) 用于标题和框架
   - 辅助色：科技青色(#06B6D4) 用于方案1（约束优化）
   - 辅助色：学术紫色(#7C3AED) 用于方案2（贝叶斯推断）
   - 强调色：成功绿(#10B981) 用于结果指标
   - 背景：浅灰渐变，专业学术风格

2. **层次关系**：
   - 第一、二层：标准尺寸，作为输入和规则说明
   - **第三层（双方案框架）**：**加大尺寸（1.5倍）**，视觉焦点，详细展示公式
   - 第四层：中等尺寸，展示推导逻辑
   - 第五层：标准尺寸，突出显示关键指标

3. **箭头与连接**：
   - 主流程：粗实线箭头（3px），深蓝色
   - 方案并列：虚线分隔
   - 融合汇聚：双线箭头汇入融合模块

4. **公式展示**：
   - 所有公式使用LaTeX风格渲染
   - 关键公式配背景色块突出
   - 参数标注清晰（λ_reg, λ_smooth, α_0等）

5. **图标元素**：
   - 约束优化：优化符号/目标函数图标
   - 贝叶斯推断：概率分布曲线/采样图标
   - 融合模块：合并/加权图标
   - 验证结果：对勾/统计图表图标

6. **尺寸与分辨率**：
   - 分辨率：300dpi以上
   - 尺寸：适合A4纸张全页展示
   - 纵向布局，重点突出双方案框架
```

---

## 二、主提示词（英文版）

### Problem 1 Principle Flowchart Prompt

```
Please generate an O-Prize level elegant scientific flowchart illustrating the core principles of Problem 1 "Fan Vote Estimation Model" with detailed methodology and solving logic.

【Research Problem】
Problem 1: How to reverse-engineer the strictly confidential fan vote shares from publicly available judge scores and elimination results?

【Core Method】
"Constrained Optimization + Bayesian Inference" Dual-Scheme Fusion Framework

---

【Flowchart Architecture】
Five-layer hierarchical design from top to bottom:

Layer 1: Problem Definition & Data Input
├── Known: Judge scores S_{i,t}, Elimination results e_t, Aggregation rules
├── Unknown: Fan votes V_{i,t} (strictly confidential)
└── Core Idea: Use "eliminated contestant has lowest combined score" constraint for reverse inference

Layer 2: Score Aggregation Rules
├── Ranking Method (S1-2): C = Rank_J(S) + Rank_F(V)
├── Percentage Method (S3-27): C = 0.5×P_J(S) + 0.5×P_F(V)
└── Ranking + Judge Save (S28-34): Combined ranking with judge tiebreaker

Layer 3: Dual-Scheme Modeling Framework ★ KEY FOCUS ★
┌──────────────────────────────────────────────────────────────────────┐
│  Scheme 1: Constrained Optimization    Scheme 2: Bayesian Inference │
│                                                                      │
│  【Objective Function】               【Prior Distribution】         │
│  min L(V) = λ_reg||V-V_prior||²       V_t ~ Dirichlet(α_t)          │
│           + λ_smooth||V-V_{t-1}||²                                   │
│                                        α_{i,t} = α_0·(1 +            │
│  λ_reg=0.10, λ_smooth=0.05            (S_{i,t}-S̄)/σ_S)              │
│                                                                      │
│  【Constraints】                       【Posterior Sampling】         │
│  s.t. C_{e_t} ≤ C_i (∀i≠e_t)          Bootstrap B=1000              │
│       ΣV_i = 1                         CI_95% = [V^{2.5%}, V^{97.5%}]│
│       0 ≤ V_i ≤ 1                                                    │
│                                                                      │
│  【Output】V̂^{opt}                    【Output】V̂^{bayes} + CI      │
│                    ↘                  ↙                              │
│                      ↘              ↙                                │
│                        ↘          ↙                                  │
│              【Weighted Fusion】                                      │
│              V̂^{final} = 0.7×V̂^{opt} + 0.3×V̂^{bayes}               │
└──────────────────────────────────────────────────────────────────────┘

Layer 4: Statistical Mechanism
├── Mathematical derivation: V_j - V_{e_t} ≥ (S_{e_t} - S_j) / ΣS_k
└── Physical interpretation: "Low-scoring survivors need higher fan support"

Layer 5: Results & Validation
├── Elimination Accuracy: 100.00%, Kappa=1.00, Improvement=751.9%
├── Certainty: Mean CI width=0.2882 (±14.4%)
└── Stratified Analysis: Uncertainty increases from Week1 to Week11

---

【Visual Design Requirements】
- Color: Deep blue (#1E3A8A) + Tech cyan (#06B6D4) + Academic purple (#7C3AED)
- Focus: Layer 3 (Dual-Scheme Framework) should be 1.5x larger, visual focal point
- Formulas: LaTeX-style rendering with highlighted background
- Icons: Optimization symbol, probability curve, merge icon, checkmark
- Resolution: 300dpi+, A4 full-page, portrait orientation
```

---

## 三、简化版提示词（快速生成）

```
请生成一张O奖级别的科研流程图，展示MCM问题1"粉丝投票估算模型"的核心原理：

【问题】从公开的评委评分+淘汰结果，逆向推导保密的粉丝投票份额

【双方案融合框架】（核心重点，占图面60%）

方案1：约束优化
├── 目标函数：min L(V) = λ_reg||V-V_prior||² + λ_smooth||V-V_{t-1}||²
├── 约束条件：C_{e_t} ≤ C_i（被淘汰者得分最低），ΣV_i=1，0≤V_i≤1
├── 参数：λ_reg=0.10, λ_smooth=0.05
└── 输出：点估计值 V̂^{opt}

方案2：贝叶斯推断
├── 先验：V_t ~ Dirichlet(α_t)，α基于评分计算
├── 后验采样：Bootstrap 1000次
├── 置信区间：CI_95% = [V^{2.5%}, V^{97.5%}]
└── 输出：后验分布 + 95%置信区间

融合策略：V̂^{final} = 0.7×V̂^{opt} + 0.3×V̂^{bayes}

【核心结果】
✓ 淘汰预测准确率：100%
✓ Cohen's Kappa：1.00
✓ 置信区间宽度：±14.4%

设计要求：深蓝+青色+紫色配色，双方案并列展示，公式清晰可见，300dpi高清
```

---

## 四、细节强化版提示词

```
在上述流程图基础上，请进一步强化以下细节：

【约束优化方案细节】
- 添加优化算法示意：梯度下降/内点法求解
- 参数敏感性标注：λ_reg∈[0.05,0.20]时准确率保持100%
- 正则化项物理意义注释：||V-V_prior||²控制向先验回归

【贝叶斯推断方案细节】
- 添加Dirichlet分布图形示意（概率单纯形上的分布曲面）
- 浓度参数计算公式的分解展示
- Bootstrap采样过程的流程小图

【统计机理细节】
- 添加具体数值案例：
  例如：若S_{e_t}=25, S_j=20, ΣS=200
  则：V_j - V_{e_t} ≥ (25-20)/200 = 2.5%
  即幸存者j比被淘汰者e_t至少多获得2.5%的粉丝投票

【结果验证细节】
- 添加三种赛季规则的准确率分解：
  ·Ranking (S1-2): 100%
  ·Percentage (S3-27): 100%
  ·JudgeSave (S28-34): 100%
- 添加不确定性随周次变化的趋势小图

【创新点标注】
用星形(★)标注核心创新：
★ 创新1：约束优化+贝叶斯推断双方案融合，兼顾精度与不确定性量化
★ 创新2：利用淘汰约束逆向推导隐变量的数学框架
★ 创新3：分层确定性分析揭示规则演变对估算精度的影响
```

---

## 五、核心公式速查表

供NanoBanana生成时的公式参考：

| 模块 | 公式 | 参数说明 |
|------|------|---------|
| 排名法合并得分 | C = Rank_J(S) + Rank_F(V) | Rank为排名函数 |
| 百分比法合并得分 | C = 0.5×P_J + 0.5×P_F | P为百分比 |
| 约束优化目标 | min L(V) = λ_reg\|\|V-V_prior\|\|² + λ_smooth\|\|V-V_{t-1}\|\|² | λ_reg=0.10, λ_smooth=0.05 |
| 淘汰约束 | C_{e_t} ≤ C_i, ∀i≠e_t | e_t为被淘汰者索引 |
| 归一化约束 | ΣV_i = 1, 0≤V_i≤1 | 投票份额和为1 |
| Dirichlet先验 | V ~ Dir(α_t) | α基于评分计算 |
| 浓度参数 | α_i = α_0·(1 + (S_i-S̄)/σ_S) | α_0=5 |
| 双方案融合 | V̂^{final} = 0.7×V̂^{opt} + 0.3×V̂^{bayes} | 权重0.7/0.3 |

---

## 六、使用建议

### 6.1 生成后自检清单

| 检查项 | 要求 | 自检 |
|-------|------|------|
| 五层结构完整 | 问题定义→合并规则→双方案框架→统计机理→结果验证 | □ |
| 双方案并列 | 约束优化与贝叶斯推断左右对称展示 | □ |
| 公式清晰 | 目标函数、约束条件、先验分布等公式可读 | □ |
| 融合模块突出 | 双方案汇聚到融合公式 | □ |
| 关键指标 | 准确率100%、Kappa=1.00、CI±14.4%清晰可见 | □ |
| 配色协调 | 深蓝+青色+紫色学术风格 | □ |

### 6.2 推荐文件命名

- 中文版：`图3_问题1粉丝投票估算原理流程图.png`
- 英文版：`Figure3_Problem1_Fan_Vote_Estimation_Principle.png`

---

**文档生成时间**：2026年MCM竞赛

**适用对象**：2026年MCM C题参赛团队

**文档版本**：v1.0

**使用工具**：NanoBanana AI图像生成

**定位**：O奖级别精美科研风流程图，详细展示问题1"约束优化+贝叶斯推断"双方案融合原理
